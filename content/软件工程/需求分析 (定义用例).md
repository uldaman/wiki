---
title: 需求分析 (定义用例)
layout: page
date: 2017-08-05 01:30
---

[TOC]

在 AUP 中, 需求也不是一次性分析完的, 会是一个不断迭代精化的过程.

# 迭代过程
1. 先进行高阶需求分析, 仅仅确定用例的名称, 以及关键的非功能性需求
2. 从高阶需求列表中选取 10% 的列表项进行详细的分析
    1. 核心架构
    2. 高业务价值
    3. 高风险
3. 结合早期时间定量的迭代开发, 进行迭代和进化式需求分析, 并且引入频繁的涉众参与、评估和对局部结果的反馈
4. 根据第 3 步的反馈, 返回第 1 步进行下一轮迭代

# 需求分类 (FURPS+)
- 功能性 (Functional): 特性、功能、安全性
- 可用性 (Usability): 人性化因素、帮助、文档
- 可靠性 (Reliability): 故障频率、可恢复性、可预测性
- 性能 (Performance): 响应时间、吞吐量、准确性、有效性、资源利用率
- 可支持性 (Supportability): 适应性、可维护性、国际化、可配置性
- 辅助性及次要的因素 (+):
    + 实现 (Implementation): 资源限制、语言和工具、硬件等
    + 接口 (Interface): 强加于外部系统接口之上的约束
    + 操作 (Operation): 对其操作设置的系统管理
    + 包装 (Packaging): 例如物理的包装盒
    + 授权 (Legal): 许可证或其它方式

# 如何管理?
需求分析会通常会有两个产出:

- 用例模型: 管理功能需求
- 补充性规格说明: 管理所有非功能需求

# 用例模型
> 用例模型并不是特指 UML 用例图, 用例图只是用例模型的一种方式.

## 什么是用例?
- 用例就是功能性需求, 或者说是用来描述系统的功能性需求
- 通过编写使用系统实现用户目标的情节 (流程) 来发现和记录功能性需求 (强调的是 FURPS+ 中的 F)
- 用例的本质是**文本**形式的情节描述, UML 只是辅助工具, 用例的重点是用文本描述出用户如何使用系统, 而不是 UML 图形, 但并不是 UML 用例图毫无用处, 在用例收集阶段, 可以用来快速构建用例语境图. 参考: ## 如何记录?
- 三种常用形式
    + 摘要: 简洁的一段式概要, 通常用于主成功场景, 可用 UML 用例图替代 (目标: 用于早期需求分析, 快速了解主题和范围)
    + 非正式: 非正式的段落格式, 用段落覆盖不能场景 (目标和摘要一样)
    + 详述: 详细的所有步骤及各种变化 (事件流), 包含补充部分, 如前置条件和成功保证 (目标: 用于详细描述下一次迭代的 10 %~20% 用例)

[详述用例模板参考](http://wiki.smallcpp.cn/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/%E8%AF%A6%E8%BF%B0%E7%94%A8%E4%BE%8B%E6%A8%A1%E6%9D%BF.html)

![](http://wiki.smallcpp.cn/static/images/如何进行用例分析/主成功场景.png)

## 用例元素
- 参与者: 具有行为的事物, 可以是人、另一个系统等
    + 主要参与者: 具有用户目标, 并通过使用系统功能来完成 (目标: 发现驱动用例的用户目标, 主要是人)
    + 协助参与者: 为系统提供服务 (目标: 为了明确外部接口和协议, 主要是另一个系统)
    + 幕后参与者: 在用例行为中具有影响或利益, 但又不是主要或协助参与者, 如政府税收机构 (目标: 为了确保确定并满足所有必要的重要事物)
- 场景: 参与者与系统间的交互, 简单的说就是用户操作了什么
- 用例: 场景的集合, 描述参与者如何使用系统来实现其目标

## 如何发现用例 (功能性需求)?
识别出主要参与者, 然后分析其目标. 用例强调参与者的目标和观点, 所以提问总是围绕参与者目标而不是用例本身.

1. 谁来使用系统?
1. 谁来启动和停止系统?
1. 谁来完成用户管理和安全管理?
1. 谁来完全系统管理?
1. 时间是参与者吗? 即需要定时任务吗?
1. 当系统失败时, 是否存在监控进程将系统重新启动?
1. 软件升级是如何处理的? 是推模式, 还是拉模式?
1. 除了人作为主要参与者外, 还有其他外部的软件或系统调用该系统的服务吗?
1. 谁来考察系统活动或性能?
1. 谁来考察日志? 是否可以远程检索?
1. 系统发生错误或故障时应通知谁?

## 如何记录?
发现用例后, 有两种记录方式:

1. **UML 用例图** (推荐)
1. **参与者 - 目标** 列表, 如果使用这种方式, 该表可做为设想制品的一部分

用例的本质虽然是**文本**形式的情节描述, 但并不是每一次迭代都需要详述所有的用例, 可以用 UML 用例图快速收集需求, 从而产出用例语境图. 迭代时, 从语境图中选取一部分进行详述.

![](http://wiki.smallcpp.cn/static/images/如何进行用例分析/用例图.png)

UML 用例图虽然也可以绘制出用户在系统上实现目标的情节 (流程), 但 AUP 不建议这么做, 因为 UML 比较专业, 为了让用户早期参与项目, 所以**建议**用文本形式进行详述. 当场景工作流复杂到文本无法描述时, **UML 活动图**是很好的选择.

## 准则
- 以本质风格编写用例, 摒除用户界面并且关注参与者的意图
    + 本质风格: 摒除 UI 细节并集中于用户真实意图的用例风格
    + 并不是说关注 UI 不好, 只是这并不是早期的需求分析工作
- 用语应尽量简洁, 以动词开头, 删除没必要的词汇
- 编写黑盒用例
    + 不对系统内部工作、构件或设计进行描述
    + 只通过职责来描述系统
    + 规定系统必须做什么, 而不是如何去做 (这也正是分析与设计的区别)
- 采用参与者和参与者目标的视点
    + 关注系统的用户或参与者来编写需求, 询问其目标和典型情况
    + 关注理解参与者所考虑的有价值结果

总结: 用例应产生对特定参与者具有价值的可观察结果
