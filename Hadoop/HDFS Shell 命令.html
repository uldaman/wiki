<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/typo.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/reset_typo.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="shortcut icon" href="/static/images/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/static/images/favicon.ico" type="image/x-icon">
        <title>HDFS Shell 命令 - Wiki | Small Cpp</title>
        <meta name="keywords" content=""/>
        <meta name="description" content=""/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container" class="typo">
            
    <div id="header">
        <div id="post-nav">
            
            <a href="/">Home</a> » <a href="/#Hadoop">Hadoop</a> » HDFS Shell 命令
            
        </div>
    </div>
    <div class="clearfix"></div>
    <div id="content">
        <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">常用命令</a><ul>
<li><a href="#cp">cp</a></li>
<li><a href="#mv">mv</a></li>
<li><a href="#count">count</a></li>
<li><a href="#du">du</a></li>
<li><a href="#dus">dus</a></li>
<li><a href="#expunge">expunge</a></li>
<li><a href="#mkdir">mkdir</a></li>
<li><a href="#touchz">touchz</a></li>
<li><a href="#rm">rm</a></li>
<li><a href="#cattext">cat/text</a></li>
<li><a href="#tail">tail</a></li>
<li><a href="#setrep">setrep</a></li>
</ul>
</li>
<li><a href="#dfsadmin">dfsadmin 系列</a><ul>
<li><a href="#report">report</a></li>
<li><a href="#safemode">safemode</a></li>
<li><a href="#setquota-quota-dirname">setQuota quota dirname</a></li>
<li><a href="#clrquota">clrQuota</a></li>
<li><a href="#setspacequota-4k-dirname">setSpaceQuota 4k dirname</a></li>
<li><a href="#clrspacequota">clrSpaceQuota</a></li>
<li><a href="#allowsnapshot">allowSnapshot</a></li>
<li><a href="#disallowsnapshot">disallowSnapshot</a></li>
</ul>
</li>
</ul>
</div>
<p>如何使用 Shell 操作 HDFS 参考 Blog: <a href="http://blog.smallcpp.cn/04-shi-yong-shell-cao-zuo-hdfs.html">使用 Shell 操作 HDFS</a></p>
<h1 id="_1">常用命令</h1>
<p>get == copyToLocal</p>
<p>put == copyFromHdfs</p>
<h2 id="cp">cp</h2>
<p>源和目标都是 hdfs</p>
<p>-f 覆盖</p>
<p>-p 保留文件属性 (cp 文件时, 更新时间会变, 所属组也会变成操作者)</p>
<h2 id="mv">mv</h2>
<p>源和目标都是 hdfs</p>
<h2 id="count">count</h2>
<p>统计目录数量</p>
<p>列出指定目录下的子目录数量 文件数量 目录大小 文件路径</p>
<p>-q 查看限额</p>
<p>-h 格式化大小</p>
<h2 id="du">du</h2>
<p>统计目录大小</p>
<p>-s 汇总</p>
<p>-h 格式化</p>
<h2 id="dus">dus</h2>
<p>相当于 du -s</p>
<h2 id="expunge">expunge</h2>
<p>清空 hdfs 回收站</p>
<h2 id="mkdir">mkdir</h2>
<p>-p 递归创建</p>
<h2 id="touchz">touchz</h2>
<p>创建空白文件</p>
<h2 id="rm">rm</h2>
<p>-f 文件不存在不提示</p>
<p>-r 递归</p>
<p>-R 同 -r</p>
<h2 id="cattext">cat/text</h2>
<p>查看文件内容</p>
<h2 id="tail">tail</h2>
<p>显示最后 1k 的内容</p>
<p>-f 动态显示新建内容</p>
<h2 id="setrep">setrep</h2>
<p>设置副本?</p>
<h1 id="dfsadmin">dfsadmin 系列</h1>
<h2 id="report">report</h2>
<p>集群报告</p>
<p>-live 活 (默认)</p>
<p>-dead 死</p>
<p>-decommissioning 正在解除中</p>
<h2 id="safemode">safemode</h2>
<p>当前集群安全模式 (只读)</p>
<p>enter 进入安全模式</p>
<p>leave 离开安全模式</p>
<p>get 当前状态</p>
<p>wait</p>
<h2 id="setquota-quota-dirname">setQuota quota dirname</h2>
<p>数量限额, 限定 dirname 下最多有 quota 个文件/目录</p>
<p>注意, 包含目录本身, 例如有个目录, 两面有两个文件, 那这个目录总共是算 3 个</p>
<h2 id="clrquota">clrQuota</h2>
<p>清除数量限额</p>
<h2 id="setspacequota-4k-dirname">setSpaceQuota 4k dirname</h2>
<p>空间限额, 限定目录空间大小</p>
<h2 id="clrspacequota">clrSpaceQuota</h2>
<p>清除空间限额</p>
<h2 id="allowsnapshot">allowSnapshot</h2>
<p>设置一个目录为可快照: <code>hdfs dfsadmin -allowSnapshot &lt;path&gt;</code></p>
<h2 id="disallowsnapshot">disallowSnapshot</h2>
<p>取消目录可快照: <code>hdfs dfsadmin -disallowSnapshot &lt;path&gt;</code></p>
    </div>

    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="HDFS Shell 命令" data-title="HDFS Shell 命令" data-url="http://wiki.smallcpp.cn/Hadoop/HDFS Shell 命令.html"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"smallwiki"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
    <!-- 多说公共JS代码 end -->


        </div>
        <div id="footer">
              <p>
                Copyright © 2012-2018 <a href="http://www.samllcpp.com/" target="_blank">Martin</a> Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
              </p>
        </div>
    </body>
</html>