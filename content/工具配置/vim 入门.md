---
title: vim 入门
layout: page
date: 2016-10-28 16:37
---

[TOC]

# 配置文件
整体 vim 的设置值一般是放置在  `/etc/vimrc`  这个文件, 不过, 不建议你修改它, 可以修改 `~/.vimrc` 这个文件（默认不存在, 请你自行手动创建! ）, 这是 vim 的用户配置文件.

#VIM 新特性
## 区块选择
- v 字符选择
- V 行选择
- ctrl + v 区块选择
- y 复制选择
- d 删除选择

## 多档案编辑
> 不常用, 推荐使用多窗口编辑功能

- vim file1 file2 ...
- :n 下一个文本
- :N 上一个文本
- :file 列出当前开启的所有文本

## 多窗口编辑
- :sp [filename] 开启一个新窗口
- [ctrl]+w j / ↓ 先按 ctrl + w 进入窗口切换模式， 再按 j k 上下切换窗口
- [ctrl]+w k / ↑
- [ctrl]+w q 退出当前窗口

# 快捷键
![](http://wiki.smallcpp.cn/static/images/VIM入门/vim.jpg)

## 移动光标的方法
|        快捷键         |                                                           功能                                                           |
|-----------------------|--------------------------------------------------------------------------------------------------------------------------|
| h 或 向左箭头键(←)    | 光标向左移动一个字符                                                                                                     |
| j 或 向下箭头键(↓)    | 光标向下移动一个字符                                                                                                     |
| k 或 向上箭头键(↑)    | 光标向上移动一个字符                                                                                                     |
| l 或 向右箭头键(→)    | 光标向右移动一个字符                                                                                                     |
| w                     | 下一个单词的第一个字符                                                                                                   |
| W                     | 下一个长单词的第一个字符                                                                                                 |
| e                     | 下一个单词的最后一个字符                                                                                                 |
| E                     | 下一个长单词的最后一个字符                                                                                               |
| b                     | 前一个单词的第一个字符                                                                                                   |
| B                     | 前一个长单词的第一个字符                                                                                                 |
| ge                    | 前一个单词的最后一个字符                                                                                                 |
| n hjkl                | 进行多次移动                                                                                                             |
| [Ctrl] + [f]          | 屏幕『向下』移动一页, 相当于 [Page Down]按键 (常用)                                                                      |
| [Ctrl] + [b]          | 屏幕『向上』移动一页, 相当于 [Page Up] 按键 (常用)                                                                       |
| [Ctrl] + [d]          | 屏幕『向下』移动半页                                                                                                     |
| [Ctrl] + [u]          | 屏幕『向上』移动半页                                                                                                     |
| +                     | 光标移动到非空格符的下一行                                                                                               |
| -                     | 光标移动到非空格符的上一行                                                                                               |
| n<space>              | 那个 n 表示『数字』, 例如 20 .                                                                                           |
|                       | 按下数字后再按空格键, 光标会向右移动这一行的 n 个字符.                                                                   |
|                       | 例如 20<space> 则光标会向后面移动 20 个字符距离.                                                                         |
| 0 或功能键[Home]      | 这是数字『 0 』: 移动到这一行的最前面字符处 (常用)                                                                       |
| $ 或功能键[End]       | 移动到这一行的最后面字符处 (常用)                                                                                        |
| H                     | 光标移动到这个屏幕的最上方那一行的第一个字符                                                                             |
| M                     | 光标移动到这个屏幕的中央那一行的第一个字符                                                                               |
| L                     | 光标移动到这个屏幕的最下方那一行的第一个字符                                                                             |
| G                     | 移动到这个档案的最后一行(常用)                                                                                           |
| nG                    | n 为数字. 移动到这个档案的第 n 行.                                                                                       |
|                       | 例如 20G 则会移动到这个档案的第 20 行 (可配合 :set nu)                                                                   |
| gg                    | 移动到这个档案的第一行, 相当于 1G 啊!  (常用)                                                                            |
| n<Enter>              | n 为数字. 光标向下移动 n 行(常用)                                                                                        |

## 搜寻与取代
|        快捷键         |                                               功能                                               |
|-----------------------|--------------------------------------------------------------------------------------------------|
| /word                 | 向光标之下寻找一个名称为 word 的字符串.                                                          |
|                       | 例如要在档案内搜寻 vbird 这个字符串, 就输入 /vbird 即可!  (常用)                                 |
| ?word                 | 向光标之上寻找一个字符串名称为 word 的字符串.                                                    |
| n                     | 这个 n 是英文按键. 代表『重复前一个搜寻的动作』.                                                 |
|                       | 举例来说,  如果刚刚我们执行 /vbird 去向下搜寻 vbird 这个字符串,                                  |
|                       | 则按下 n 后, 会向下继续搜寻下一个名称为 vbird 的字符串.                                          |
|                       | 如果是执行 ?vbird 的话, 那么按下 n 则会向上继续搜寻名称为 vbird 的字符串!                        |
| N                     | 与 n 功能相反                                                                                    |
| :s/word1/word2/g      | 替换当前行第一个 word1 为 word2 !                                                                |
| :%s/word1/word2/g     | 替换所有行第一个 word1 为 word2 !                                                                |
| :n1,n2s/word1/word2/g | n1 与 n2 为数字. 在第 n1 与 n2 行之间寻找 word1 这个字符串, 并将该字符串取代为 word2 !           |
|                       | 举例来说, 在 100 到 200 行之间搜寻 vbird 并取代为 VBIRD 则:  『:100,200s/vbird/VBIRD/g』. (常用) |
| :1,$s/word1/word2/g   | 从第一行到最后一行寻找 word1 字符串, 并将该字符串取代为 word2 ! (常用)                           |
| :1,$s/word1/word2/gc  | 从第一行到最后一行寻找 word1 字符串, 并将该字符串取代为 word2 !                                  |
|                       | 且在取代前显示提示字符给用户确认 (confirm) 是否需要取代! (常用)                                  |

## 删除、复制与贴上
> 注意 d 系行命令其实不是删除, 是剪切

|        快捷键         |                                                           功能                                                           |
|-----------------------|--------------------------------------------------------------------------------------------------------------------------|
| x, X                  | 在一行字当中, x 为向后删除一个字符 (相当于 [del] 按键),                                                                  |
|                       | X 为向前删除一个字符(相当于 [backspace] 亦即是退格键) (常用)                                                             |
| nx                    | n 为数字, 连续向后删除 n 个字符. 举例来说, 我要连续删除 10 个字符,  『10x』.                                             |
| dd                    | 删除游标所在的那一整行(常用)                                                                                             |
| ndd                   | n 为数字. 删除光标所在的向下 n 行, 例如 20dd 则是删除 20 行 (常用)                                                       |
| d1G                   | 删除光标所在到第一行的所有数据                                                                                           |
| dG                    | 删除光标所在到最后一行的所有数据                                                                                         |
| d$                    | 删除游标所在处, 到该行的最后一个字符                                                                                     |
| d0                    | 那个是数字的 0 , 删除游标所在处, 到该行的最前面一个字符                                                                  |
| diw                   | 删除光标所在单词, 不包括空白字符                                                                                         |
| daw                   | 删除光标所在单词, 包括空白字符                                                                                           |
| dw                    | 从当前位置删除到下一个单词词首, 包括空格                                                                                 |
| de                    | 从当前位置删除到下一个单词词首, 不包括空格                                                                               |
| yy                    | 复制游标所在的那一行(常用)                                                                                               |
| nyy                   | n 为数字. 复制光标所在的向下 n 行, 例如 20yy 则是复制 20 行(常用)                                                        |
| yiw                   | 复制光标所在单词, 不包括空白字符                                                                                         |
| yaw                   | 复制光标所在单词, 包括空白字符                                                                                           |
| yw                    | 从当前位置复制到下一个单词词首, 包括空格                                                                                 |
| ye                    | 从当前位置复制到下一个单词词首, 不包括空格                                                                               |
| y1G                   | 复制游标所在行到第一行的所有数据                                                                                         |
| yG                    | 复制游标所在行到最后一行的所有数据                                                                                       |
| y0                    | 复制光标所在的那个字符到该行行首的所有数据                                                                               |
| y$                    | 复制光标所在的那个字符到该行行尾的所有数据                                                                               |
| p, P                  | p 为将已复制的数据在光标下一行贴上, P 则为贴在游标上一行!                                                                |
|                       | 举例来说, 我目前光标在第 20 行, 且已经复制了 10 行数据.                                                                  |
|                       | 则按下 p 后,  那 10 行数据会贴在原本的 20 行之后, 亦即由 21 行开始贴.                                                    |
|                       | 但如果是按下 P 呢？ 那么原本的第 20 行会被推到变成 30 行.  (常用)                                                        |
| J                     | 将光标所在行与下一行的数据结合成同一行                                                                                   |
| c                     | 重复删除多个数据, 例如向下删除 10 行, [ 10cj ]                                                                           |
| u                     | 复原前一个动作. (常用)                                                                                                   |
| [Ctrl] + r            | 重做上一个动作. (常用)                                                                                                   |
| .                     | 不要怀疑! 这就是小数点! 意思是重复前一个动作的意思.                                                                      |
|                       | 如果你想要重复删除、重复贴上等等动作, 按下小数点『.』就好了!  (常用)                                                     |

## 模式切换
|       快捷键        |                                       功能                                       |
|---------------------|----------------------------------------------------------------------------------|
| i, I                | 进入插入模式(Insert mode):                                                       |
|                     | i 为『从目前光标所在处插入』                                                     |
|                     | I 为『在目前所在行的第一个非空格符处开始插入』.  (常用)                          |
| a, A                | 进入插入模式(Insert mode):                                                       |
|                     | a 为『从目前光标所在的下一个字符处开始插入』                                     |
|                     | A 为『从光标所在行的最后一个字符处开始插入』. (常用)                             |
| o, O                | 进入插入模式(Insert mode):  这是英文字母 o 的大小写.                             |
|                     | o 为『在目前光标所在的下一行处插入新的一行』;                                    |
|                     | O 为在目前光标所在处的上一行插入新的一行! (常用)                                 |
| r, R                | 进入取代模式(Replace mode):                                                      |
|                     | r 只会取代光标所在的那一个字符一次;                                              |
|                     | R会一直取代光标所在的文字, 直到按下 ESC 为止; (常用)                             |
| [Esc]               | 退出编辑模式, 回到一般模式中(常用)                                               |
| :w                  | 将编辑的数据写入硬盘档案中(常用)                                                 |
| :w!                 | 若文件属性为『只读』时, 强制写入该档案.                                          |
| :w!                 | 不过, 到底能不能写入,  还是跟你对该档案的档案权限有关啊!                         |
| :q                  | 离开 vi (常用)                                                                   |
| :q!                 | 若曾修改过档案, 又不想储存, 使用 ! 为强制离开不储存档案.                         |
|                     | 注意一下啊, 那个惊叹号 (!) 在 vi 当中, 常常具有『强制』的意思～                  |
| :wq                 | 储存后离开, 若为 :wq! 则为强制储存后离开 (常用)                                  |
| ZZ                  | 这是大写的 Z 喔! 若档案没有更动, 则不储存离开, 若档案已经被更动过, 则储存后离开! |
| :w [filename]       | 将编辑的数据储存成另一个档案（类似另存新档）                                     |
| :r [filename]       | 在编辑的数据中, 读入另一个档案的数据;                                            |
| :r [filename]       | 亦即将 『filename』 这个档案内容加到游标所在行后面                               |
| :n1,n2 w [filename] | 将 n1 到 n2 的内容储存成 filename 这个档案.                                      |
| :! command          | 暂时离开 vi 到指令行模式下执行 command 的显示结果!                               |
|                     | 例如:『:! ls /home』即可在 vi 当中察看 /home 底下以 ls 输出的档案信息!           |

## 环境的变更
|        快捷键         |                                                           功能                                                           |
|-----------------------|--------------------------------------------------------------------------------------------------------------------------|
| :set nu               | 显示行号, 设定之后, 会在每一行的前缀显示该行的行号                                                                       |
| :set nonu             | 与 set nu 相反, 为取消行号!                                                                                              |

## 自动补全
|       快捷键       |                            功能                            |
|--------------------|------------------------------------------------------------|
| [ctrl]+x  [ctrl]+n | 通过目前正在编辑的这个“文件的内容文字”作为关键字, 予以补齐 |
| [ctrl]+x  [ctrl]+f | 以当前目录内的“文件名”作为关键字, 予以补齐                 |
| [ctrl]+x  [ctrl]+o | 以扩展名作为语法补充, 以 vim 内置的关键字, 予以补齐        |
