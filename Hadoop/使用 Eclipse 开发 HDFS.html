<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/typo.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/reset_typo.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="shortcut icon" href="/static/images/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/static/images/favicon.ico" type="image/x-icon">
        <title>使用 Eclipse 开发 HDFS - Wiki | Small Cpp</title>
        <meta name="keywords" content=""/>
        <meta name="description" content=""/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container" class="typo">
            
    <div id="header">
        <div id="post-nav">
            
            <a href="/">Home</a> » <a href="/#Hadoop">Hadoop</a> » 使用 Eclipse 开发 HDFS
            
        </div>
    </div>
    <div class="clearfix"></div>
    <div id="content">
        <p>先在 windows 7 下搭建好 eclipse 项目环境, 参考 <a href="http://wiki.smallcpp.com/%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/Eclipse%20%E9%85%8D%E7%BD%AE%20Java%20%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html">Eclipse 配置 Java 开发环境</a></p>
<div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#_1">导入依赖包</a></li>
<li><a href="#_2">关联源码</a></li>
<li><a href="#_3">关于权限</a></li>
</ul>
</div>
<h1 id="_1">导入依赖包</h1>
<p>创建一个 Java 工程后, 在工程下新建个 lib 文件夹, 导入 hdfs 的相关 jar 包:</p>
<ul>
<li>/usr/smallcpp/hadoop-2.7.1/share/hadoop/common</li>
<li>/usr/smallcpp/hadoop-2.7.1/share/hadoop/common/lib</li>
<li>/usr/smallcpp/hadoop-2.7.1/share/hadoop/hdfs</li>
<li>/usr/smallcpp/hadoop-2.7.1/share/hadoop/hdfs/lib</li>
</ul>
<p>测试 hdfs 导入这些目录下的 jar 就可以了…</p>
<p>选中导入后所有的 jar 包, 右键 [构建路径] -&gt; [添加到构建路径]</p>
<p><img alt="" src="http://i59.tinypic.com/2m43bex.jpg" /></p>
<h1 id="_2">关联源码</h1>
<p>先去 <a href="http://archive.apache.org/dist/">Hadoop</a> 下载源码包:</p>
<p><img alt="" src="http://wiki.smallcpp.com/static/images/使用Eclipse开发HDFS/hdfssrc.png" /></p>
<p>然后在 Eclipase 上按 <code>ctrl</code> 追踪源码时, 就可以设置关联刚下载的 Hadoop 源码了.</p>
<p><img alt="" src="http://wiki.smallcpp.com/static/images/使用Eclipse开发HDFS/associatedsrc.png" /></p>
<h1 id="_3">关于权限</h1>
<p>当我们远程上传文件时, 可能会报权限不足的错误, 此时有两种处理办法:</p>
<p><strong>第一种</strong>, 是使用 <code>FileSystem</code> 的另一个重载, 传递第三个参数来伪装成集群的 <code>super-user</code>, 如:</p>
<p><code>FileSystem fs = FileSystem.get(URI.create(uri), new Configuration(), "root");</code></p>
<p><strong>第二种</strong>, 是去 linux 里修改下 hdfs 的配置, 进入 sbin 目录, <code>vim hdfs-site.xml</code></p>
<div class="hlcode"><pre><span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>dfs.permissions<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>false<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>
</pre></div>


<p><br><br />
不管哪一种, 都不怎么靠谱, 确实在 Hadoop 1.x 时, 没有怎么考虑安全的问题, 因为 Hadoop 的应用场景是离线数据分析, 一般不对外网开放;<br><br />
不过在 Hadoop 2.x 中扩展了个 kerberos 项目用来控制 Hadoop 的权限, 如有必要可以再去研究.</p>
<blockquote>
<p>另外好像还有个 Apache ranger 项目, 也是一个 Hadoop 集群权限框架, 提供操作、监控、管理复杂的数据权限.</p>
</blockquote>
    </div>

    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="使用 Eclipse 开发 HDFS" data-title="使用 Eclipse 开发 HDFS" data-url="http://wiki.smallcpp.com/Hadoop/使用 Eclipse 开发 HDFS.html"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"smallwiki"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
    <!-- 多说公共JS代码 end -->


        </div>
        <div id="footer">
              <p>
                Copyright © 2012-2017 <a href="http://www.samllcpp.com/" target="_blank">Martin</a> Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
              </p>
        </div>
    </body>
</html>